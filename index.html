<!DOCTYPE html>

<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <title>CamShopify Comserve</title>
    <style type="text/css">
      body {
        font-family: Helvetica, sans-serif;
      }
      h2,
      h3 {
        margin-top: 0;
      }
      form {
        margin-top: 15px;
      }
      form > input {
        margin-right: 15px;
      }
    
    </style>

    <link rel="stylesheet" href="style.css" media="screen" type="text/css" />
  </head>
  <body>
	<!-- The video -->
	<video autoplay muted loop id="myVideo" class="hidden-mobile">
	<source src="./images/BlackVideo.mp4" type="video/mp4">
	</video>



	<div class="content">


   
	<div class="container">
		<img class="imagebanner"
		src="images/comserve-logo-ret.png"
		alt="Comserve Logo"
		style="width: 200px; height: 60px"
		/>
	

  
      
     


		<h3>Photo &amp; Video</h3>





    	<div class="" id="my_camera">


		</div>


		<div class="" id="results"><h3> Your captured image will appear here... </h3>
		
		
		</div>

<br>

	<p id="demo"><center> </center></p>

	<hr>
	<p><center>Tap The Camera Icon Below to Take Site Photo, <br> The Supply Site Information Below and Save Media </center></p>


      <!-- First, include the Webcam.js JavaScript Library -->
      <script type="text/javascript" src="webcam.min.js"></script>

      <!-- Configure a few settings and attach camera -->
      <script language="JavaScript">
        Webcam.set({
          width: 320,
          height: 280,
          image_format: "jpeg",
          jpeg_quality: 90,
          constraints: {
            width: { exact: 320 },
            height: { exact: 280 },
          },
        });
        Webcam.set("constraints", {
          facingMode: "environment",
        });
        Webcam.attach("#my_camera");

        //front camera.. switch to back camera
        //facingMode : user rep => front camera    environment rep Back camera
      </script>

      <!-- A button for taking snaps -->
      <div class="floating-box">

        <form>
          <input
            class="circle zoom"
            type="button"
            value=""
            onClick="take_snapshot()"
          />
        </form>
	
      </div>
	



<br>


	<div class="dropdown floating-box3">
		<button class="btn btn-default dropdown-toggle sitedetails" type="button" data-toggle="dropdown">SITE DETAILS
		<span class="caret"></span></button>
		<ul class="dropdown-menu">
				<li class="dropdown-submenu">
			<a class="test" tabindex="-1" href="#">OUTDOOR PHOTOS <span class="caret"></span></a>
			<ul class="dropdown-menu">
			<select
			class="round-input m-3"
			id="FacilityType"
			type="text"
			name="product_type"
			style="width: 190px"
			>
			<li><a tabindex="-1" href="#">Yard Sign</a></li>
			<li><a tabindex="-1" href="#">Yard Overview</a></li>
			<option id="fencing" value="fencing"><a tabindex="-1" href="#">Fencing</a>
			</select>
				<select
				class="round-input m-3"
				id="FacilityType"
				type="text"
				name="product_type"
				style="width: 190px"
				>
				<option value="MS" id="MS" name="Yes">MS (Meter Station)</option>
				<option value="CS" id="CS" name="No">
					CS (Compressor Station)
				</option>
				<option value="VL" id="VL" name="No">VL (Valve)</option>
				<option value="PS" id="PS" name="No">PS (Pump Station)</option>
				<option value="TM" id="TM" name="No">TM (Terminal)</option>
				<option value="OF" id="OF" name="No">OF (office)</option>
				<option value="RH" id="RH" name="No">RH (Radio Hub)</option>
				<option value="MI" id="MI" name="No">MI (Miscellaneous)</option>
				</select>
			</option>

				<li><a tabindex="-1" href="#">Yard</a></li>
				<li><a tabindex="-1" href="#">Target_wall_Mast</a></li>
				<li><a tabindex="-1" href="#">Target_wall_Mast_roof</a></li>
				<li><a tabindex="-1" href="#">Location for Service</a></li>
				<li><a tabindex="-1" href="#">Building & Tower</a></li>
				<li><a tabindex="-1" href="#">All Outdoor Communication</a></li>
				<li><a tabindex="-1" href="#">Exisiting Mast</a></li>
				<li><a tabindex="-1" href="#">Existing interbuilding</a></li>
				<li><a tabindex="-1" href="#">Outdoor Communication</a></li>
				<li><a tabindex="-1" href="#">Exisiting Trenching</a></li>
				<li><a tabindex="-1" href="#">All Outdoor Facilities</a></li>
				<li><a tabindex="-1" href="#">Proposed Trench Location</a></li>
				<li><a tabindex="-1" href="#">Proposed Slurry Pit</a></li>
				<li><a tabindex="-1" href="#">overhead wiring in yard</a></li>
				<li><a tabindex="-1" href="#">Anything Unusual</a></li>
				<li><a tabindex="-1" href="#">Safety, Danger or concerns</a></li>
				<li><a tabindex="-1" href="#">Others Not Listed</a></li>
			</ul>
		</li>

			<li class="dropdown-submenu">
				<a class="test" tabindex="-1" href="#"> Indoor Photos <span class="caret"></span></a>
				<ul class="dropdown-menu">
				<li><a class="test" tabindex="-1" href="#">From doorway</a></li>
				<li><a class="test" tabindex="-1" href="#"> Cable entry Point </a></li>
				<li><a class="test" tabindex="-1" href="#">Equipment interconnections</a></li>
				<li><a class="test" tabindex="-1" href="#"> Possible solution rack install location </a></li>
				<li><a class="test" tabindex="-1" href="#"> Switches, routers, modems (cabinet wide view) </a></li>
				<li><a class="test" tabindex="-1" href="#"> Identify active and spare ports on network gear. </a></li>
				<li><a class="test" tabindex="-1" href="#"> Existing radio equipment </a></li>
				<li><a class="test" tabindex="-1" href="#"> Existing Barton </a></li>
				<li><a class="test" tabindex="-1" href="#"> Existing Bristol </a></li>
				<li><a class="test" tabindex="-1" href="#"> Existing PBX </a></li>
				<li class="dropdown-submenu">
					<a class="test" href="#">(S,W,E,N) All 4 walls or indoor<span class="caret"></span></a>
					<ul class="dropdown-menu">
					<li><a href="#"> South  </a></li>
					<li><a href="#">East</a></li>
						<li><a href="#">West</a></li>
						<li><a href="#">North</a></li>
					</ul>
				</li>
				</ul>


			</li>


			<li class="dropdown-submenu">
				<a class="test" tabindex="-1" href="#">Video with Descriptive Audio <span class="caret"></span></a>
				<ul class="dropdown-menu">
				<li><a tabindex="-1" href="#">Yard overview, yard and all buildings, facilities, access</a></li>
				<li><a tabindex="-1" href="#">Outside each building/enclosure walk around</a></li>
				<li><a tabindex="-1" href="#">Outsidend</a></li>
					<li><a tabindex="-1" href="#">Inside each building and walk around</a></li>
					<li><a tabindex="-1" href="#">Inside all buildings</a></li>
					<li><a tabindex="-1" href="#">Existing network cabinets or wall mount racks</a></li>
					<li><a tabindex="-1" href="#">Proposed solution inside and outside, direction to services</a></li>
					<li><a tabindex="-1" href="#">safety issues, dangers, or concerns.</a></li>
					<li><a tabindex="-1" href="#">Others</a></li>
					<li><a tabindex="-1" href="#">Outsidend</a></li>
					<li><a tabindex="-1" href="#">Outsidend</a></li>
					
				</ul>
			</li>

			<li class="dropdown-submenu">
				<a class="test" tabindex="-1" href="#">Screen Shots <span class="caret"></span></a>
				<ul class="dropdown-menu">
				<li><a tabindex="-1" href="#">Speed Tests</a></li>
				<li><a tabindex="-1" href="#">Cellular signal tests</a></li>

				<li><a tabindex="-1" href="#">Satellite signal tests</a></li>

				</ul>
			</li>
		</ul>
	</div>


	<script>
	$(document).ready(function(){
	$('.dropdown-submenu a.test').on("click", function(e){
		$(this).next('ul').toggle();
		e.stopPropagation();
		e.preventDefault();
	});
	});
	</script>


     

      <!-- Code to handle taking the snapshot and displaying it locally -->

    <div class="floating-box3">

	<div id="formflex">


	<h3>SITE DETAILS</h3>
		<form id="foodForm">
		<div class="m-3">
			<input
			type="text"
			id="siteName"
			name="site_name"
			class="no-round-input"
			placeholder="Site Name"
			required
			/>

		





		</div>
		<div class="m-3">
			<div class="m-3">Facility Type</div>
			<select
			class="round-input m-3"
			id="FacilityType"
			type="text"
			name="product_type"
			style="width: 190px"
			>
			<option value="MS" id="MS" name="Yes">MS (Meter Station)</option>
			<option value="CS" id="CS" name="No">
				CS (Compressor Station)
			</option>
			<option value="VL" id="VL" name="No">VL (Valve)</option>
			<option value="PS" id="PS" name="No">PS (Pump Station)</option>
			<option value="TM" id="TM" name="No">TM (Terminal)</option>
			<option value="OF" id="OF" name="No">OF (office)</option>
			<option value="RH" id="RH" name="No">RH (Radio Hub)</option>
			<option value="MI" id="MI" name="No">MI (Miscellaneous)</option>
			</select>
		</div>
		<div class="m-3">
			<div class="m-3">Activity</div>
			<select
			class="round-input m-3"
			id="Activity"
			type="text"
			name="category_type"
			style="width: 190px"
			>
			<option value="S" id="S" name="Yes">S (Survey)</option>
			<option value="PI" id="PI" name="No">PI (Pre-install)</option>
			<option value="AB" id="AB" name="No">AB (As Built)</option>
			<option value="I" id="I" name="No">I (Investigation)</option>
			</select>
		</div>


		<div class="m-3">
			<input
			type="text"
			id="Description"
			name="Description222"
			class="no-round-input"
			placeholder="Description"
			required
			/>
		</div>

		<div class="m-3">
			<input
			type="text"
			id="Building"
			name="Building2222"
			class="no-round-input"
			placeholder="Building"
			required
			/>
		</div>

		

		<div class="m-5" id="FIAA"
			name="FIAA"
			class="no-round-input"
			placeholder="Fauto" style="width: 200px">
			<input
			type="submit"
			id="js_send"
			class="button"
			value="Complete & Save Media"
			/>
		</div>
		</form>
	</div>
	
	</div>





	<style>
		html, body {
			margin: 0!important;
			padding: 0!important;
		}
	</style>

	<br>

	<br>
	<br>


	<h3>Video Recoding</h3>

	<br>

	<button  class="button" id="btn-start-recording">Start Recording</button>
	<br> <br>
	<button class="button" id="btn-stop-recording" disabled>Stop Recording</button>

	<hr>

	<video class="button" controls autoplay playsinline></video>


	</div>

	
	<script>
	var video = document.querySelector('video');

	function captureCamera(callback) {
		navigator.mediaDevices.getUserMedia({ audio: true, video: true }).then(function(camera) {
			callback(camera);
		}).catch(function(error) {
			alert('Unable to capture your camera. Please check console logs.');
			console.error(error);
		});
	}

	function stopRecordingCallback() {
		video.src = video.srcObject = null;
		video.muted = false;
		video.volume = 1;
		video.src = URL.createObjectURL(recorder.getBlob());
    
		recorder.camera.stop();
		recorder.destroy();
		recorder = null;
	}

	var recorder; // globally accessible

	document.getElementById('btn-start-recording').onclick = function() {
		this.disabled = true;
		captureCamera(function(camera) {
			video.muted = true;
			video.volume = 0;
			video.srcObject = camera;

			recorder = RecordRTC(camera, {
				type: 'video'
			});

			recorder.startRecording();

			// release camera on stopRecording
			recorder.camera = camera;

			document.getElementById('btn-stop-recording').disabled = false;
		});
	};

	document.getElementById('btn-stop-recording').onclick = function() {
		this.disabled = true;
		recorder.stopRecording(stopRecordingCallback);
	};
	</script>

	<footer style="margin-top: 20px;"><small id="send-message"></small></footer>



      <!-- App Logic -->
      <script src="app.js"></script>
	  <script src="https://www.webrtc-experiment.com/common.js"></script>
	  <script src="/RecordRTC.js"></script>
    </div>
	</div>

	<footer> 
	<div id="comserve">

	</div> </footer>
  </body>
</html>
